Creating payment records and receipt: Array(3)
DesktopQRScanner.tsx:1519 🔄 Attempting to save payment records to database...
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
ec64a0bb-64db-4f33-9c61-03da2eac838d-00-j5dpf20akjna.spock.replit.dev/api/scan-student-qr/create-ticket-payment:1  Failed to load resource: the server responded with a status of 500 (Internal Server Error)Understand this error
DesktopQRScanner.tsx:1538 ⚠️ Database payment save failed, using local receipt: {"error":"حدث خطأ في إنشاء إيصال الدفع"}
DesktopQRScanner.tsx:1561 🔄 Creating automatic gain entry for receipt: REC-1756075670142-A5W7G
DesktopQRScanner.tsx:1578 ✅ Automatic gain entry created successfully
DesktopQRScanner.tsx:1614 🔄 Updating payment status with smart merge strategy...
DesktopQRScanner.tsx:1618 🔄 Immediately updating local payment state before API refresh...
DesktopQRScanner.tsx:1628 ✅ Immediately marked Group 35 Month 1 as PAID
DesktopQRScanner.tsx:1628 ✅ Immediately marked Group 35 Month 2 as PAID
DesktopQRScanner.tsx:1628 ✅ Immediately marked Group 35 Month 3 as PAID
DesktopQRScanner.tsx:1637 🔄 Attendance refresh trigger updated: 0 -> 100
DesktopQRScanner.tsx:1628 ✅ Immediately marked Group 35 Month 1 as PAID
DesktopQRScanner.tsx:1628 ✅ Immediately marked Group 35 Month 2 as PAID
DesktopQRScanner.tsx:1628 ✅ Immediately marked Group 35 Month 3 as PAID
DesktopQRScanner.tsx:1637 🔄 Attendance refresh trigger updated: 0 -> 100
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:170 🔄 Attendance table refresh triggered (trigger: 100) for group 34
DesktopQRScanner.tsx:170 🔄 Attendance table refresh triggered (trigger: 100) for group 35
DesktopQRScanner.tsx:261 🔍 Fetched ALL attendance history for group 34: Object
DesktopQRScanner.tsx:261 🔍 Fetched ALL attendance history for group 35: Object
DesktopQRScanner.tsx:1645 🔄 Smart refresh: fetching latest data while preserving local updates...
DesktopQRScanner.tsx:1296 🔄 Smart refresh: fetching fresh payment data while preserving local updates...
DesktopQRScanner.tsx:1300 💾 Preserved current payment status: Object
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-01: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-02: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-06: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-05: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-04: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-03: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-07: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-08: PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-09: PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-10: PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-11: PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-12: PAID
DesktopQRScanner.tsx:212 ✅ Updating attendance table with refreshed payment data: Object
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-01: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-02: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-04: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-03: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-05: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-06: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-07: NOT PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-08: PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-09: PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-10: PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-11: PAID
DesktopQRScanner.tsx:193 🔍 Refreshed payment status for 2025-12: PAID
DesktopQRScanner.tsx:212 ✅ Updating attendance table with refreshed payment data: Object
DesktopQRScanner.tsx:1317 ✅ Fresh groups fetched for smart refresh: (2) [{…}, {…}]
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
stallwart.build.js:1 stallwart: failed ping 1
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 10 Year 2025: PAID ✅
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 1 Year 2026: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 9 Year 2025: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 2 Year 2026: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 4 Year 2026: NOT PAID ❌
stallwart.build.js:1 stallwart: failed ping 2
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 5 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 6 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 8 Year 2025: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 9 Year 2025: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 8 Year 2025: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 7 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 3 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 4 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 5 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 1 Year 2026: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 2 Year 2026: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 6 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 7 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 11 Year 2025: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 34 Month 12 Year 2025: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 10 Year 2025: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 3 Year 2026: NOT PAID ❌
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 11 Year 2025: PAID ✅
DesktopQRScanner.tsx:1342 🔍 Smart refresh check - Group 35 Month 12 Year 2025: PAID ✅
DesktopQRScanner.tsx:1368 📊 Fresh payment status from API: {34: {…}, 35: {…}}
DesktopQRScanner.tsx:1395 ✅ API confirmed: Group 34 Month 1 is PAID
DesktopQRScanner.tsx:1395 ✅ API confirmed: Group 34 Month 2 is PAID
DesktopQRScanner.tsx:1393 🔄 Preserving local update: Group 35 Month 3 remains PAID
DesktopQRScanner.tsx:1400 🎯 Final merged payment status: {34: {…}, 35: {…}}
DesktopQRScanner.tsx:1411 ✅ Smart refresh completed with merged data
DesktopQRScanner.tsx:1684 ✅ Student payment data refreshed and local state updated
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 34, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:422 🔍 Attendance table payment check: Group 35, Year 2025, Month 8, MonthKey: 2025-08, Paid: true
DesktopQRScanner.tsx:1650 🔍 Final verification: checking payment status after 1 second...
DesktopQRScanner.tsx:1673 🎯 Final check - Group 35 Month 1 Year 2026: PAID ✅
DesktopQRScanner.tsx:1673 🎯 Final check - Group 35 Month 2 Year 2026: PAID ✅
DesktopQRScanner.tsx:1673 🎯 Final check - Group 35 Month 3 Year 2026: NOT PAID ❌
apiDebugger.ts:122 📊 API Request Summary