🔄 Attempting to save payment records to database...
ec64a0bb-64db-4f33-9c61-03da2eac838d-00-j5dpf20akjna.spock.replit.dev/api/scan-student-qr/create-ticket-payment:1  Failed to load resource: the server responded with a status of 500 (Internal Server Error)Understand this error
DesktopQRScanner.tsx:1303 ⚠️ Database payment save failed, using local receipt: {"error":"حدث خطأ في إنشاء إيصال الدفع"}
DesktopQRScanner.tsx:1326 🔄 Creating automatic gain entry for receipt: REC-1755374544514-5FAVR
DesktopQRScanner.tsx:1343 ✅ Automatic gain entry created successfully
DesktopQRScanner.tsx:1379 🔄 Refreshing student payment data after successful payment...
DesktopQRScanner.tsx:1382 🔄 Clearing payment cache and refreshing data...
DesktopQRScanner.tsx:1046 🔄 Fetching groups and payments for student: 8 type: student
DesktopQRScanner.tsx:1050 🔄 Groups API response status: 200
DesktopQRScanner.tsx:1055 ✅ Fetched student groups from API: Array(2)
DesktopQRScanner.tsx:1073 🔄 Fetching unified payment status for group 14
DesktopQRScanner.tsx:1073 🔄 Fetching unified payment status for group 21
DesktopQRScanner.tsx:1109 ✅ Group 14 unified payment status: Object
DesktopQRScanner.tsx:1110 ✅ Paid months for group 14: Array(4)
DesktopQRScanner.tsx:1109 ✅ Group 21 unified payment status: Object
DesktopQRScanner.tsx:1110 ✅ Paid months for group 21: Array(5)
DesktopQRScanner.tsx:1131 ✅ Final groups with unified payment data: Array(2)
DesktopQRScanner.tsx:1132 ✅ Unified payment status map: Object
DesktopQRScanner.tsx:1402 ✅ Marking group 21 month 10 as PAID in local state
DesktopQRScanner.tsx:1415 🔄 Triggering attendance table refresh...
DesktopQRScanner.tsx:1446 ✅ Student payment data refreshed and local state updated
DesktopQRScanner.tsx:1418 🔄 Attendance refresh trigger updated: 1 -> 101
DesktopQRScanner.tsx:1418 🔄 Attendance refresh trigger updated: 1 -> 101
DesktopQRScanner.tsx:165 🔄 Attendance table refresh triggered (trigger: 101) for group 14
DesktopQRScanner.tsx:165 🔄 Attendance table refresh triggered (trigger: 101) for group 21
DesktopQRScanner.tsx:1424 🔍 Final verification: checking payment status after 1 second...
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-02: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-01: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-03: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-05: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-06: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-04: NOT PAID
stallwart.build.js:1 stallwart: failed ping 1
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-08: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-09: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-07: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-10: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-11: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-12: NOT PAID
DesktopQRScanner.tsx:201 ✅ Updating attendance table with refreshed payment data: {2025-01: {…}, 2025-02: {…}, 2025-03: {…}, 2025-04: {…}, 2025-05: {…}, …}
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-01: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-02: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-03: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-04: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-05: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-06: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-07: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-09: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-08: PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-10: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-11: NOT PAID
DesktopQRScanner.tsx:182 🔍 Refreshed payment status for 2025-12: NOT PAID
DesktopQRScanner.tsx:201 ✅ Updating attendance table with refreshed payment data: {2025-01: {…}, 2025-02: {…}, 2025-03: {…}, 2025-04: {…}, 2025-05: {…}, …}
stallwart.build.js:1 stallwart: failed ping 2
DesktopQRScanner.tsx:1435 🎯 Final check - Group 21 Month 10: NOT PAID ❌