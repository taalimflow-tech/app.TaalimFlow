
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

11:23:52 AM [express] serving on port 5000
11:24:02 AM [express] GET /api/firebase-config 200 in 2ms :: {"apiKey":"AIzaSyAJvdyFFV_WGIlv48J42-MfD…
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:02.395Z,
    originalMaxAge: 86400000,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  }
}
Auth check - Session user: undefined
No currentUser found in session
11:24:02 AM [express] GET /api/auth/me 401 in 3ms :: {"error":"المستخدم غير مسجل دخول"}
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:02.450Z,
    originalMaxAge: 86400000,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  }
}
Auth check - Session user: undefined
No currentUser found in session
11:24:02 AM [express] GET /api/auth/me 401 in 2ms :: {"error":"المستخدم غير مسجل دخول"}
11:24:14 AM [express] POST /api/school/verify-code 200 in 83ms :: {"success":true,"school":{"id":8,"n…
11:24:15 AM [express] POST /api/school/select 200 in 18ms :: {"school":{"id":8,"name":"last ","code":…
11:24:15 AM [express] POST /api/school/select 200 in 16ms :: {"school":{"id":8,"name":"last ","code":…
11:24:15 AM [express] POST /api/school/select 200 in 15ms :: {"school":{"id":8,"name":"last ","code":…
Found user: admin@last.com
Password starts with $2b: true
Bcrypt comparison result: true
11:24:20 AM [express] POST /api/auth/login 200 in 84ms :: {"user":{"id":23,"schoolId":8,"email":"admi…
Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
11:24:26 AM [express] GET /api/firebase-config 304 in 1ms :: {"apiKey":"AIzaSyAJvdyFFV_WGIlv48J42-MfD…
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:26.370Z,
    originalMaxAge: 86399999,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  },
  schoolId: 8,
  schoolCode: 'last',
  user: {
    id: 23,
    email: 'admin@last.com',
    name: 'adminlastscl',
    role: 'admin',
    schoolId: 8,
    phone: '0672189889',
    gender: null
  },
  userId: 23
}
Auth check - Session user: {
  id: 23,
  email: 'admin@last.com',
  name: 'adminlastscl',
  role: 'admin',
  schoolId: 8,
  phone: '0672189889',
  gender: null
}
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:26.370Z,
    originalMaxAge: 86399999,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  },
  schoolId: 8,
  schoolCode: 'last',
  user: {
    id: 23,
    email: 'admin@last.com',
    name: 'adminlastscl',
    role: 'admin',
    schoolId: 8,
    phone: '0672189889',
    gender: null
  },
  userId: 23
}
Auth check - Session user: {
  id: 23,
  email: 'admin@last.com',
  name: 'adminlastscl',
  role: 'admin',
  schoolId: 8,
  phone: '0672189889',
  gender: null
}
11:24:26 AM [express] GET /api/auth/me 200 in 17ms :: {"user":{"id":23,"email":"admin@last.com","name…
11:24:26 AM [express] GET /api/auth/me 200 in 77ms :: {"user":{"id":23,"email":"admin@last.com","name…
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:26.509Z,
    originalMaxAge: 86399999,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  },
  schoolId: 8,
  schoolCode: 'last',
  user: {
    id: 23,
    email: 'admin@last.com',
    name: 'adminlastscl',
    role: 'admin',
    schoolId: 8,
    phone: '0672189889',
    gender: null
  },
  userId: 23
}
Auth check - Session user: {
  id: 23,
  email: 'admin@last.com',
  name: 'adminlastscl',
  role: 'admin',
  schoolId: 8,
  phone: '0672189889',
  gender: null
}
11:24:26 AM [express] GET /api/notifications/unread-count 200 in 17ms :: {"count":0}
11:24:26 AM [express] GET /api/announcements 200 in 16ms :: [{"id":2,"schoolId":8,"title":"test1","co…
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:27.666Z,
    originalMaxAge: 86399999,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  },
  schoolId: 8,
  schoolCode: 'last',
  user: {
    id: 23,
    email: 'admin@last.com',
    name: 'adminlastscl',
    role: 'admin',
    schoolId: 8,
    phone: '0672189889',
    gender: null
  },
  userId: 23
}
Auth check - Session user: {
  id: 23,
  email: 'admin@last.com',
  name: 'adminlastscl',
  role: 'admin',
  schoolId: 8,
  phone: '0672189889',
  gender: null
}
11:24:30 AM [express] GET /api/gain-loss-entries 200 in 37ms :: [{"id":63,"schoolId":8,"type":"gain",…
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:30.537Z,
    originalMaxAge: 86399999,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  },
  schoolId: 8,
  schoolCode: 'last',
  user: {
    id: 23,
    email: 'admin@last.com',
    name: 'adminlastscl',
    role: 'admin',
    schoolId: 8,
    phone: '0672189889',
    gender: null
  },
  userId: 23
}
Auth check - Session user: {
  id: 23,
  email: 'admin@last.com',
  name: 'adminlastscl',
  role: 'admin',
  schoolId: 8,
  phone: '0672189889',
  gender: null
}
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:30.537Z,
    originalMaxAge: 86399999,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  },
  schoolId: 8,
  schoolCode: 'last',
  user: {
    id: 23,
    email: 'admin@last.com',
    name: 'adminlastscl',
    role: 'admin',
    schoolId: 8,
    phone: '0672189889',
    gender: null
  },
  userId: 23
}
Auth check - Session user: {
  id: 23,
  email: 'admin@last.com',
  name: 'adminlastscl',
  role: 'admin',
  schoolId: 8,
  phone: '0672189889',
  gender: null
}
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:30.537Z,
    originalMaxAge: 86399999,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  },
  schoolId: 8,
  schoolCode: 'last',
  user: {
    id: 23,
    email: 'admin@last.com',
    name: 'adminlastscl',
    role: 'admin',
    schoolId: 8,
    phone: '0672189889',
    gender: null
  },
  userId: 23
}
Auth check - Session user: {
  id: 23,
  email: 'admin@last.com',
  name: 'adminlastscl',
  role: 'admin',
  schoolId: 8,
  phone: '0672189889',
  gender: null
}
Auth check - Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-08-24T11:24:30.537Z,
    originalMaxAge: 86399999,
    httpOnly: true,
    secure: false,
    sameSite: 'lax'
  },
  schoolId: 8,
  schoolCode: 'last',
  user: {
    id: 23,
    email: 'admin@last.com',
    name: 'adminlastscl',
    role: 'admin',
    schoolId: 8,
    phone: '0672189889',
    gender: null
  },
  userId: 23
}
Auth check - Session user: {
  id: 23,
  email: 'admin@last.com',
  name: 'adminlastscl',
  role: 'admin',
  schoolId: 8,
  phone: '0672189889',
  gender: null
}
[DEBUG] searchStudentsAndChildren: Found 4 total records (verified only)
11:24:30 AM [express] GET /api/qr-scanner/search 200 in 52ms :: [{"id":13,"userId":25,"name":"student…
[DEBUG] searchStudentsAndChildren: Found 4 total records (verified only)
11:24:30 AM [express] GET /api/qr-scanner/search 200 in 37ms :: [{"id":13,"userId":25,"name":"student…
[DEBUG] searchStudentsAndChildren: Found 4 total records (verified only)
11:24:30 AM [express] GET /api/qr-scanner/search 200 in 86ms :: [{"id":13,"userId":25,"name":"student…
[DEBUG] searchStudentsAndChildren: Found 4 total records (verified only)
11:24:30 AM [express] GET /api/qr-scanner/search 200 in 82ms :: [{"id":13,"userId":25,"name":"student…
11:24:33 AM [express] GET /api/children 200 in 18ms :: []